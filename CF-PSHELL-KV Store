# Path to your bulk.json file
$bulkFilePath = "C:\path\to\bulk.json"

# Cloudflare info
$accountId   = "<ACCOUNT_ID>"
$namespaceId = "<NAMESPACE_ID>"
$apiToken    = "<API_TOKEN>"

# Read JSON body
$body = Get-Content -Raw -Path $bulkFilePath

# API endpoint for KV bulk put
$uri = "https://api.cloudflare.com/client/v4/accounts/$accountId/storage/kv/namespaces/$namespaceId/bulk"

# Headers
$headers = @{
    "Authorization" = "Bearer $apiToken"
    "Content-Type"  = "application/json"
}

Write-Host "Uploading bulk KV data to namespace $namespaceId ..." -ForegroundColor Cyan

$response = Invoke-RestMethod -Method Put -Uri $uri -Headers $headers -Body $body

Write-Host "Success:" $response.success
Write-Host "Errors:"  ($response.errors   | ConvertTo-Json -Depth 5)
Write-Host "Messages:" ($response.messages | ConvertTo-Json -Depth 5)
