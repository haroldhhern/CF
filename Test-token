$ApiToken = "YOUR_API_TOKEN_HERE"

$Headers = @{ "Authorization" = "Bearer $ApiToken" }

$zonesResponse = Invoke-RestMethod `
  -Uri "https://api.cloudflare.com/client/v4/zones" `
  -Headers $Headers `
  -Method GET

if (-not $zonesResponse.success) {
    Write-Host "Request failed:"
    $zonesResponse.errors | ForEach-Object {
        Write-Host "  Code   : $($_.code)"
        Write-Host "  Msg    : $($_.message)"
    }
    return
}

$zonesResponse.result | Select-Object name, id
